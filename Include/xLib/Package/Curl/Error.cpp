/**
 * \file  Error.cpp
 * \brief CURL error
 */


#include "Error.h"

namespace xl::package::curl
{

/**************************************************************************************************
*    public
*
**************************************************************************************************/

//-------------------------------------------------------------------------------------------------
Error::Error(
    cCURLcode a_code
) :
    _code{a_code}
{
}
//-------------------------------------------------------------------------------------------------
CURLcode
Error::code() const
{
    return _code;
}
//-------------------------------------------------------------------------------------------------
bool_t
Error::isOk() const
{
    return (code() == CURLE_OK);
}
//-------------------------------------------------------------------------------------------------
std::tstring_t
Error::category() const
{
    return xT("xl::package::curl::Error");
}
//-------------------------------------------------------------------------------------------------
std::tstring_t
Error::message() const
{
    if ( isOk() ) {
        return {};
    }

    cptr_cchar_t pszRv = ::curl_easy_strerror( code() );
    if (pszRv == nullptr) {
        return Const::strUnknown();
    }

    return pszRv;
}
//-------------------------------------------------------------------------------------------------

} // namespace
