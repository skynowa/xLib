# This is a sample build configuration for C++ â€“ Make.
# Check our guides at https://confluence.atlassian.com/x/5Q4SMw for more examples.
# Only use spaces to indent your .yml configuration.
# -----
# You can specify a custom docker image from Docker Hub as your build environment.


sudo: required

variables:
  GIT_SUBMODULE_STRATEGY: recursive

init:
  # Print environment info ( set / systeminfo)
  - env
  - cmake --version

before_script:
  - git submodule sync --recursive
  - git submodule update --init --recursive

before_install:
  - apt-get -qq update
  - apt-get install -y cmake

image: gcc:6.1
language: cpp
compiler:
  - gcc


pipelines:
  default:
    - step:
        script: # Modify the commands below to build your repository.
          - apt-get -qq update
          - apt-get install -y cmake
          - apt-get install -y libx11-xcb-dev
          - apt-get install -y libssl-dev
          - apt-get install -y libssh2-1-dev
          - apt-get install -y libmysqlclient-dev
          - git clone https://skynowa:5582000*aaa@bitbucket.org/skynowa/cmakelib.git $BITBUCKET_CLONE_DIR/../CMakeLib
          - ./Build/makefile-yaml.sh
          - make
